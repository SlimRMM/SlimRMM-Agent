#!/bin/bash

# SlimRMM Agent Pre-Installation Script for macOS
# This script runs before the PKG installer copies files

echo "Preparing SlimRMM Agent installation..."

# Stop existing service if running
if [ -f "/Library/LaunchDaemons/io.slimrmm.agent.plist" ]; then
    echo "Stopping existing agent service..."
    launchctl unload "/Library/LaunchDaemons/io.slimrmm.agent.plist" 2>/dev/null || true
fi

# Also try to stop by label in case plist path changed
launchctl remove io.slimrmm.agent 2>/dev/null || true

echo "Ready for installation"
exit 0
